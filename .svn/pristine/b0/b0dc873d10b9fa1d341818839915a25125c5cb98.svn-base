package com.hzlf.sampletest.fragment;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

import com.hzlf.sampletest.R;
import com.hzlf.sampletest.activity.AddActivity;
import com.hzlf.sampletest.entityclass.Info_add1;
import com.hzlf.sampletest.others.MyApplication;

public class fragment_add1 extends Fragment {

	private Spinner spinner_renwuleibie;
	private List<String> data_renwuleibie;
	private ArrayAdapter<String> adapter_renwuleibie;

	private Button btn_next1;;
	private EditText edittext1;
	private TextView textview1, textview3, textview4, textview5, textview6,
			textview7, textview8;
	int year, month, day, hour, minute;
	String str_chuanzhen, str_youbian, number;

	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {

		AddActivity addActivity = (AddActivity) getActivity();
		number = addActivity.getNumber();

		View view = inflater.inflate(R.layout.add_layout1, container, false);
		spinner_renwuleibie = (Spinner) view
				.findViewById(R.id.spinner_renwuleibie);
		// 数据
		data_renwuleibie = new ArrayList<String>();
		data_renwuleibie.add("监督抽检");
		data_renwuleibie.add("风险监测");

		// 适配器
		adapter_renwuleibie = new ArrayAdapter<String>(getActivity(),
				android.R.layout.simple_spinner_item, data_renwuleibie); // 设置样式
		adapter_renwuleibie
				.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // 加载适配器
		spinner_renwuleibie.setAdapter(adapter_renwuleibie);

		Calendar calendar = Calendar.getInstance();
		year = calendar.get(Calendar.YEAR);
		month = calendar.get(Calendar.MONTH);
		day = calendar.get(Calendar.DAY_OF_MONTH);
		hour = calendar.get(Calendar.HOUR_OF_DAY);
		minute = calendar.get(Calendar.MINUTE);

		textview1 = (TextView) view.findViewById(R.id.text_chouyangdanbianhao);
		edittext1 = (EditText) view.findViewById(R.id.text_renwulaiyuan);
		textview3 = (TextView) view.findViewById(R.id.text_danweimingcheng);
		textview4 = (TextView) view.findViewById(R.id.text_danweidizhi);
		textview5 = (TextView) view.findViewById(R.id.text_lianxiren);
		textview6 = (TextView) view.findViewById(R.id.text_dianhua);
		textview7 = (TextView) view.findViewById(R.id.text_chuanzhen);
		textview8 = (TextView) view.findViewById(R.id.text_youbian);

		textview1.setText(number);
		textview5.setText(((MyApplication) getActivity().getApplication()).getName());

		btn_next1 = (Button) view.findViewById(R.id.btn_next1);
		btn_next1.setOnClickListener(new OnClickListener() {

			@Override
			public void onClick(View v) {
				// TODO 自动生成的方法存根
				if (edittext1.getText().toString().equals("")) {
					((MyApplication) getActivity().getApplication()).setAdd1(0);
				} else {
					((MyApplication) getActivity().getApplication()).setAdd1(1);
				}
				if (textview7.getText().toString().equals("")) {
					str_chuanzhen = "/";
				} else {
					str_chuanzhen = textview7.getText().toString();
				}
				if (textview8.getText().toString().equals("")) {
					str_youbian = "/";
				} else {
					str_youbian = textview8.getText().toString();
				}
				Info_add1 info_add1 = new Info_add1(textview1.getText()
						.toString(), edittext1.getText().toString(),
						spinner_renwuleibie.getSelectedItem().toString(),
						textview3.getText().toString(), textview4.getText()
								.toString(), textview5.getText().toString(),
						textview6.getText().toString(), str_chuanzhen,
						str_youbian);

				((MyApplication) getActivity().getApplication())
						.setInfoAdd1(info_add1);

				AddActivity addActivity = (AddActivity) getActivity();
				addActivity.nextFragment();
			}
		});

		return view;
	}

}
